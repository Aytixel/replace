<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><meta name="author" content="Aytixel"><meta name="description" content="The concept, just the same as r/place"><title>re/place</title><style>@import url(https://fonts.googleapis.com/css2?family=Roboto&display=swap);:root{--color1:#fff;--color2:#1c1b1a;--color3:#c7c1bb;--cursor-x-offset:1000;--cursor-y-offset:1000;--image-scale:0}*{position:relative;z-index:0;margin:0;padding:0;font-family:Roboto,sans-serif}html{height:100%;overflow:hidden}body{height:100%;background-color:var(--color2);overflow:hidden}#position{position:fixed;top:2vh;left:50%;padding:0 3vh;height:3vh;background-color:var(--color1);border-radius:1.5vh;line-height:3vh;font-size:1.75vh;color:var(--color2);box-shadow:.1vh .1vh .4vh -.2vh var(--color2);transform:translateX(-50%)}#drawing{position:absolute;top:50%;left:50%;height:80vh;width:80vh;transform:translate(-50%,-50%)}#image{position:absolute;image-rendering:pixelated;background-image:url(/current.png);background-size:contain;transform-origin:top left;transform:scale(var(--image-scale))}#cursor{position:absolute;top:0;left:0;height:3.2vh;width:3.2vh;transform-origin:top left;transform:scale(.0125) translate(calc(3.2vh * var(--cursor-x-offset)),calc(3.2vh * var(--cursor-y-offset)))}#cursor::after,#cursor::before{display:block;position:absolute;top:50%;left:50%;height:5.333vh;width:5.333vh;content:"";background-color:#9c9894;transform:translate(-50%,-50%)}#cursor::before{clip-path:polygon(0 0,40% 0,40% 20%,20% 20%,20% 40%,0 40%,0 60%,20% 60%,20% 80%,40% 80%,40% 100%,60% 100%,60% 80%,80% 80%,80% 60%,100% 60%,100% 40%,80% 40%,80% 20%,60% 20%,60% 0,100% 0,100% 100%,0 100%)}#cursor::after{height:4.266vh;width:4.266vh;background-color:#5c5956;clip-path:polygon(0 0,37.5% 0,37.5% 12.5%,12.5% 12.5%,12.5% 37.5%,0 37.5%,0 62.5%,12.5% 62.5%,12.5% 87.5%,37.5% 87.5%,37.5% 100%,62.5% 100%,62.5% 87.5%,87.5% 87.5%,87.5% 62.5%,100% 62.5%,100% 37.5%,87.5% 37.5%,87.5% 12.5%,62.5% 12.5%,62.5% 0,100% 0,100% 100%,0 100%)}#timer,#zoom{position:fixed;left:50%;bottom:2vh;height:3vh;width:11vh;padding:0 3vh;background-color:var(--color1);border-radius:1.5vh;box-shadow:.1vh .1vh .4vh -.2vh var(--color2);transform:translateX(-50%)}#zoom{position:fixed;left:auto;right:2vh;width:7vh;padding:0}#timer svg,#zoom svg{margin:.25vh;height:2.5vh;width:2.5vh}#time,#zoom-level{float:right;line-height:3vh;font-size:1.75vh;color:var(--color2)}#zoom-level{right:1vh}#place-mode{display:none;line-height:3vh;font-size:1.75vh}#timer.place-mode{width:auto}#timer.place-mode :not(#place-mode){display:none}#timer.place-mode #place-mode{display:block}#place-bar{position:fixed;bottom:0;width:100vw;padding:1vh 0;background-color:var(--color1);box-shadow:.1vh .1vh .4vh -.2vh var(--color2);transform:translateY(100%);transition:.2s transform ease-in-out}#place-bar.focus{transform:translateY(0)}#colors{display:flex;justify-content:center;flex-wrap:wrap;margin-top:1vh;left:50%;width:98vw;transform:translateX(-50%)}#colors .color{margin:.15vh;height:3vh;width:5vh;border-radius:.3vh;border:solid .15vh var(--color3);transition:.2s border-color ease-in-out,.2s box-shadow ease-in-out}#colors .color.focus,#colors .color:hover{border-color:var(--color1);box-shadow:0 0 0 .15vh var(--color2)}#burgandy{background-color:#6d001a}#dark-red{background-color:#be0039}#red{background-color:#ff4500}#orange{background-color:#ffa800}#yellow{background-color:#ffd635}#pale-yellow{background-color:#fff8b8}#dark-green{background-color:#00a368}#green{background-color:#00cc78}#light-green{background-color:#7eed56}#dark-teal{background-color:#00756f}#teal{background-color:#009eaa}#light-teal{background-color:#00ccc0}#dark-blue{background-color:#2450a4}#blue{background-color:#3690ea}#light-blue{background-color:#51e9f4}#indigo{background-color:#493ac1}#periwinkle{background-color:#6a5cff}#lavender{background-color:#94b3ff}#dark-purple{background-color:#811e9f}#purple{background-color:#b44ac0}#pale-purple{background-color:#e4abff}#magenta{background-color:#de107f}#pink{background-color:#ff3881}#light-pink{background-color:#f9a}#dark-brown{background-color:#6d482f}#brown{background-color:#9c6926}#beige{background-color:#ffb470}#black{background-color:#000}#dark-gray{background-color:#515252}#gray{background-color:#898d90}#light-gray{background-color:#d4d7d9}#white{background-color:#fff}#place-button-container{display:flex;justify-content:space-evenly;flex-wrap:wrap;margin-top:2vh;left:50%;width:80vw;min-width:25.2vh;transform:translateX(-50%)}#cancel-place,#valid-place{display:inline-block;margin:.5vh;height:3vh;width:25vh;border:solid .1vh var(--color3);border-radius:1.5vh;flex-shrink:0;transition:.2s border-color ease-in-out}#cancel-place:hover,#valid-place:hover{border:solid .1vh var(--color2)}#cancel-place::after,#cancel-place::before,#valid-place::after,#valid-place::before{display:block;position:absolute;top:50%;left:50%;height:.2vh;width:2vh;content:"";background-color:var(--color2)}#cancel-place::before{transform:translate(-50%,-50%) rotate(45deg)}#cancel-place::after{transform:translate(-50%,-50%) rotate(-45deg)}#valid-place::before{top:50%;width:1vh;transform:translate(-85%,200%) rotate(45deg)}#valid-place::after{transform:translate(-15%,-50%) rotate(-45deg)}</style></head><body><div id="drawing"><canvas id="image" width="2000" height="2000">Canvas disabled</canvas><div id="cursor"></div></div><div id="position">(1000, 1000)</div><div id="timer"><svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="50" height="50" viewBox="0 0 50 50" style="fill:#1c1b1a"><path d="M 25 2 C 12.309295 2 2 12.309295 2 25 C 2 37.690705 12.309295 48 25 48 C 37.690705 48 48 37.690705 48 25 C 48 12.309295 37.690705 2 25 2 z M 25 4 C 36.609824 4 46 13.390176 46 25 C 46 36.609824 36.609824 46 25 46 C 13.390176 46 4 36.609824 4 25 C 4 13.390176 13.390176 4 25 4 z M 24.984375 6.9863281 A 1.0001 1.0001 0 0 0 24 8 L 24 22.173828 A 3 3 0 0 0 22 25 A 3 3 0 0 0 22.294922 26.291016 L 16.292969 32.292969 A 1.0001 1.0001 0 1 0 17.707031 33.707031 L 23.708984 27.705078 A 3 3 0 0 0 25 28 A 3 3 0 0 0 28 25 A 3 3 0 0 0 26 22.175781 L 26 8 A 1.0001 1.0001 0 0 0 24.984375 6.9863281 z"></path></svg><div id="time">00:05:00</div><div id="place-mode">Place a tile</div></div><div id="zoom"><svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="30" height="30" viewBox="0 0 30 30" style="fill:#1c1b1a"><path d="M 13 3 C 7.4889971 3 3 7.4889971 3 13 C 3 18.511003 7.4889971 23 13 23 C 15.396508 23 17.597385 22.148986 19.322266 20.736328 L 25.292969 26.707031 A 1.0001 1.0001 0 1 0 26.707031 25.292969 L 20.736328 19.322266 C 22.148986 17.597385 23 15.396508 23 13 C 23 7.4889971 18.511003 3 13 3 z M 13 5 C 17.430123 5 21 8.5698774 21 13 C 21 17.430123 17.430123 21 13 21 C 8.5698774 21 5 17.430123 5 13 C 5 8.5698774 8.5698774 5 13 5 z"></path></svg><div id="zoom-level">1x</div></div><div id="place-bar"><div id="colors"><div id="burgandy" class="color"></div><div id="dark-red" class="color"></div><div id="red" class="color"></div><div id="orange" class="color"></div><div id="yellow" class="color"></div><div id="pale-yellow" class="color"></div><div id="dark-green" class="color"></div><div id="green" class="color"></div><div id="light-green" class="color"></div><div id="dark-teal" class="color"></div><div id="teal" class="color"></div><div id="light-teal" class="color"></div><div id="dark-blue" class="color"></div><div id="blue" class="color"></div><div id="light-blue" class="color"></div><div id="indigo" class="color"></div><div id="periwinkle" class="color"></div><div id="lavender" class="color"></div><div id="dark-purple" class="color"></div><div id="purple" class="color"></div><div id="pale-purple" class="color"></div><div id="magenta" class="color"></div><div id="pink" class="color"></div><div id="light-pink" class="color"></div><div id="dark-brown" class="color"></div><div id="brown" class="color"></div><div id="beige" class="color"></div><div id="black" class="color"></div><div id="dark-gray" class="color"></div><div id="gray" class="color"></div><div id="light-gray" class="color"></div><div id="white" class="color focus"></div></div><div id="place-button-container"><div id="cancel-place"></div><div id="valid-place"></div></div></div><script type="application/javascript">var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(a){return a.raw=a};$jscomp.createTemplateTagFirstArgWithRaw=function(a,b){a.raw=b;return a};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};var colors="#6d001a #be0039 #ff4500 #ffa800 #ffd635 #fff8b8 #00a368 #00cc78 #7eed56 #00756f #009eaa #00ccc0 #2450a4 #3690ea #51e9f4 #493ac1 #6a5cff #94b3ff #811e9f #b44ac0 #e4abff #de107f #ff3881 #ff99aa #6d482f #9c6926 #ffb470 #000000 #515252 #898d90 #d4d7d9 #ffffff".split(" "),drawing_element=document.getElementById("drawing"),image_canvas_element=document.getElementById("image"),cursor_element=document.getElementById("cursor"),position_element=document.getElementById("position"),timer_element=document.getElementById("timer"),time_element=document.getElementById("time"),zoom_level_element=document.getElementById("zoom-level"),place_bar_element=document.getElementById("place-bar"),cancel_place_element=document.getElementById("cancel-place"),valid_place_element=document.getElementById("valid-place"),color_elements=place_bar_element.getElementsByClassName("color"),image_canvas_context=image_canvas_element.getContext("2d"),zoom_level=1,zoom_levels=[1,2.5,5,7.5,10,15,20,30,40,60],canvas_offset={x:0,y:0},last_position={x:1E3,y:1E3},last_screen_position={x:0,y:0},last_touch_zoom_distance=0,timer=300,is_placing=!1;image_canvas_context.imageSmoothingEnabled=!1;var clamp=function(a,b,c){return Math.max(Math.min(b,c),a)},complete_number=function(a){return(a.toString().length%2?"0":"")+a},display_time=function(){return time_element.textContent=complete_number(Math.floor(timer/3600))+":"+complete_number(Math.floor(timer/60%60))+":"+complete_number(timer%60)},reset_timer=function(){timer=300;timer_element.classList.remove("place-mode")};timer_element.addEventListener("click",function(){1>timer&&place_bar_element.classList.add("focus")});setInterval(function(){display_time();0<timer?timer--:timer_element.classList.add("place-mode")},1E3);place_bar_element.addEventListener("mousedown",function(a){return a.stopPropagation()});place_bar_element.addEventListener("touchstart",function(a){return a.stopPropagation()},{passive:!0});cancel_place_element.addEventListener("click",function(){return place_bar_element.classList.remove("focus")});for(var $jscomp$loop$3={},$jscomp$iter$1=$jscomp.makeIterator(color_elements),$jscomp$key$color_element=$jscomp$iter$1.next();!$jscomp$key$color_element.done;$jscomp$loop$3={$jscomp$loop$prop$color_element$4:$jscomp$loop$3.$jscomp$loop$prop$color_element$4},$jscomp$key$color_element=$jscomp$iter$1.next())$jscomp$loop$3.$jscomp$loop$prop$color_element$4=$jscomp$key$color_element.value,$jscomp$loop$3.$jscomp$loop$prop$color_element$4.addEventListener("click",function(a){return function(){for(var b=$jscomp.makeIterator(color_elements),c=b.next();!c.done;c=b.next())c.value.classList.remove("focus");a.$jscomp$loop$prop$color_element$4.classList.add("focus")}}($jscomp$loop$3));var change_cursor=function(a,b){cursor_element.style.setProperty("--cursor-x-offset",last_position.x);cursor_element.style.setProperty("--cursor-y-offset",last_position.y)},update_position=function(){var a=image_canvas_element.getClientRects()[0].height;canvas_offset.x=clamp(0,(1999-last_position.x)/2E3*a,.9995*a);canvas_offset.y=clamp(0,(1999-last_position.y)/2E3*a,.9995*a);drawing_element.style.transform="translate("+(canvas_offset.x-a)+"px, "+(canvas_offset.y-a)+"px)";change_cursor(last_position.x,last_position.y)};window.addEventListener("wheel",function(a){requestAnimationFrame(function(){zoom_level-=Math.sign(a.deltaY);zoom_level=clamp(1,zoom_level,10);zoom_level_element.textContent=zoom_level+"x";image_canvas_element.style.transform="scale("+zoom_levels[zoom_level-1]+") scale(var(--image-scale))";cursor_element.style.transform="scale(0.0125) scale("+zoom_levels[zoom_level-1]+") translate(calc(3.2vh * var(--cursor-x-offset)), calc(3.2vh * var(--cursor-y-offset)))";update_position()})});var start=function(a){a.cancelable&&a.preventDefault();if(a.touches){2==a.touches.length&&(last_touch_zoom_distance=0);if(1<a.touches.length)return;a=a.touches[0]}last_screen_position.x=a.screenX;last_screen_position.y=a.screenY;window.addEventListener("mousemove",move);window.addEventListener("touchmove",move,{passive:!1});window.addEventListener("mouseup",end);window.addEventListener("mouseleave",end);window.addEventListener("touchend",end);window.addEventListener("touchcancel",end);window.addEventListener("touchleave",end)},move=function(a){a.cancelable&&a.preventDefault();requestAnimationFrame(function(){if(a.touches){if(2==a.touches.length){var b=Math.round(Math.sqrt(Math.pow(a.touches[0].screenX-a.touches[1].screenX,2)+Math.pow(a.touches[0].screenY-a.touches[1].screenY,2))/50);last_touch_zoom_distance!=b&&(zoom_level-=Math.sign(last_touch_zoom_distance-b),zoom_level=clamp(1,zoom_level,10),zoom_level_element.textContent=zoom_level+"x",image_canvas_element.style.transform="scale("+zoom_levels[zoom_level-1]+") scale(var(--image-scale))",cursor_element.style.transform="scale(0.0125) scale("+zoom_levels[zoom_level-1]+") translate(calc(3.2vh * var(--cursor-x-offset)), calc(3.2vh * var(--cursor-y-offset)))",update_position(),last_touch_zoom_distance=b);return}if(2<a.touches.length)return;a=a.touches[0]}canvas_offset.x+=a.screenX-last_screen_position.x;canvas_offset.y+=a.screenY-last_screen_position.y;last_screen_position.x=a.screenX;last_screen_position.y=a.screenY;b=image_canvas_element.getClientRects()[0].height;canvas_offset.x=clamp(0,canvas_offset.x,.9995*b);canvas_offset.y=clamp(0,canvas_offset.y,.9995*b);last_position.x=Math.round(1999-canvas_offset.x/b*2E3);last_position.y=Math.round(1999-canvas_offset.y/b*2E3);position_element.textContent="("+last_position.x+", "+last_position.y+")";drawing_element.style.transform="translate("+(canvas_offset.x-b)+"px, "+(canvas_offset.y-b)+"px)";change_cursor(last_position.x,last_position.y)})},end=function(a){a.touches&&1<a.touches.length||(window.removeEventListener("mousemove",move),window.removeEventListener("touchmove",move),window.removeEventListener("mouseup",end),window.removeEventListener("mouseleave",end),window.removeEventListener("touchend",end),window.removeEventListener("touchcancel",end),window.removeEventListener("touchleave",end))},update_image_scale=function(){image_canvas_element.style.setProperty("--image-scale",drawing_element.getClientRects()[0].height/2E3);update_position()};update_image_scale();change_cursor(1E3,1E3);window.addEventListener("resize",function(){return requestAnimationFrame(update_image_scale)});window.addEventListener("mousedown",start);window.addEventListener("touchstart",start,{passive:!0});var ws=new WebSocket("wss://"+document.location.host),last_update=null,change_pixel=function(a,b,c){image_canvas_context.fillStyle=colors[c];image_canvas_context.fillRect(a,b,1,1)};ws.addEventListener("open",function(){ws.addEventListener("message",function(a){if("string"===typeof a.data)switch(a=a.data.split("::"),a.shift()){case "register":localStorage.setItem("uuid",a.shift());timer=300-Math.round((new Date-(last_update=new Date(a.shift())))/1E3);display_time();1>timer&&timer_element.classList.add("place-mode");valid_place_element.addEventListener("click",function(){if(!is_placing)for(var b=0;32>b;b++)color_elements[b].classList.contains("focus")&&(is_placing=!0,ws.send("place::"+localStorage.getItem("uuid")+"::"+last_position.x+"::"+last_position.y+"::"+b))});break;case "place":4<=a.length&&(last_update=new Date(a.shift()),place_bar_element.classList.remove("focus"),change_pixel(+a.shift(),+a.shift(),+a.shift()),reset_timer());break;case "other_place":for(;3<=a.length;)change_pixel(+a.shift(),+a.shift(),+a.shift())}});ws.send("register::"+(localStorage.getItem("uuid")||""))});</script></body></html>